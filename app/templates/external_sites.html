{% extends "base.html" %}
{% block title %}å¤–éƒ¨SEO - ã‚µã‚¤ãƒˆä¸€è¦§{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-6">ğŸš€ å¤–éƒ¨SEO | ã‚µã‚¤ãƒˆä¸€è¦§</h2>

{% for s in sites %}
  <div class="border rounded p-4 flex justify-between items-center mb-4 bg-white dark:bg-gray-800">
    <div class="overflow-hidden">
      <div class="font-semibold truncate max-w-xs">{{ s.name }}</div>
      <a href="{{ s.url }}" class="text-blue-600 text-sm break-all" target="_blank">{{ s.url }}</a>
    </div>

    <!-- â˜… ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä¿®æ­£ -->
    <button class="px-4 py-2 bg-blue-600 text-white rounded"
         hx-post="{{ url_for('main.start_external_seo', site_id=s.id) }}"
         hx-target="#seo-panel-{{ s.id }}"
         hx-swap="outerHTML">
      å¤–éƒ¨SEOé–‹å§‹
    </button>

    <!-- ğŸ”„ é€²æ—ãƒ‘ãƒãƒ«ï¼ˆæŠ¼ã™ã¨è‡ªå‹•è¡¨ç¤ºã«ç½®æ›ã•ã‚Œã‚‹ï¼‰ -->
    <div id="seo-panel-{{ s.id }}"
         hx-get="{{ url_for('main.external_seo_job_status', site_id=s.id) }}"
         hx-trigger="every 5s"
         hx-swap="innerHTML">
    <!-- åˆæœŸè¡¨ç¤ºã¯ç©º (ãƒ«ãƒ¼ãƒˆãŒ 'ã‚¸ãƒ§ãƒ–ç„¡ã—' ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã™) -->
    </div>
{% else %}
  <p class="text-gray-600">ç™»éŒ²ã•ã‚ŒãŸã‚µã‚¤ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
{% endfor %}
{% endblock %}
