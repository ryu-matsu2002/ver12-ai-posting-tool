{% extends "auth_base.html" %}
{% block title %}Login | AI Posting Tool{% endblock %}

{% block content %}
<!-- Font Awesome 読み込み（auth_base.html に入っていない場合のみ） -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<form method="post"
      class="w-full max-w-md bg-white dark:bg-gray-800 p-8 rounded shadow">
  {{ form.hidden_tag() }}
  <h2 class="text-2xl font-semibold mb-6 text-center">ログイン</h2>

  <!-- メールアドレスまたはユーザー名 -->
  <div class="mb-4">
    {{ form.identifier.label(class="block mb-1") }}
    {{ form.identifier(class="w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600") }}
  </div>

  <!-- パスワード -->
  <div class="mb-6">
    {{ form.password.label(class="block mb-1") }}
    <div class="relative">
      {{ form.password(class="w-full p-2 rounded border pr-12 dark:bg-gray-700 dark:border-gray-600", id="password") }}
      <span onclick="togglePassword('password')"
            class="absolute right-3 top-2.5 cursor-pointer text-xl text-gray-600 hover:text-gray-800">
        <i class="fas fa-eye"></i>
      </span>
    </div>
  </div>

  <!-- ログインボタン -->
  {{ form.submit(class="w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded") }}

  <!-- 新規登録リンク -->
  <p class="text-center text-sm mt-4">
    新規登録は
    <a href="{{ url_for('main.register') }}" class="text-blue-600 hover:underline">こちら</a>
  </p>
</form>

<div class="text-center mt-3">
  <a class="text-blue-600" href="{{ url_for('main.forgot_password_username_only') }}">
    パスワードをお忘れですか？
  </a>
</div>


<!-- パスワード表示切り替え -->
<script>
  function togglePassword(id) {
    const input = document.getElementById(id);
    input.type = input.type === "password" ? "text" : "password";
  }
</script>
{% endblock %}
