{% extends "auth_base.html" %}
{% block title %}Register | AI Posting Tool{% endblock %}

{% block content %}
<style>
  html {
    scroll-behavior: smooth;
  }
  .sticky-header {
    position: sticky;
    top: 0;
    z-index: 50;
    background-color: white;
    padding-top: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #ddd;
  }
</style>

<div class="min-h-screen flex flex-col items-center py-6">
  <form method="post"
        class="w-full max-w-2xl bg-white dark:bg-gray-800 p-0 rounded shadow overflow-hidden">

    {{ form.hidden_tag() }}

    <!-- üîí Âõ∫ÂÆöË°®Á§∫Ôºö„Çø„Ç§„Éà„É´Ôºã„É≠„Ç∞„Ç§„É≥ÊÉÖÂ†± -->
    <div class="sticky-header px-8">
      <h2 class="text-2xl font-semibold mb-4 text-center">Êñ∞Ë¶èÁôªÈå≤</h2>

      <div class="mb-4">
        {{ form.username.label(class="block mb-1") }}
        {{ form.username(class="w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600") }}
      </div>

      <div class="mb-4">
        {{ form.email.label(class="block mb-1") }}
        {{ form.email(class="w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600") }}
      </div>

      <div class="mb-4">
        {{ form.password.label(class="block mb-1") }}
        {{ form.password(class="w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600") }}
      </div>

      <div class="mb-0">
        {{ form.confirm.label(class="block mb-1") }}
        {{ form.confirm(class="w-full p-2 rounded border dark:bg-gray-700 dark:border-gray-600") }}
      </div>
    </div>

    <!-- ‚úèÔ∏è „Çπ„ÇØ„É≠„Éº„É´„Åô„ÇãÂÖ•Âäõ„Éï„Ç£„Éº„É´„Éâ -->
    <div class="px-8 py-6">
      <!-- Âå∫ÂàÜ -->
      <div class="mb-6">
        <label class="block mb-1">Âå∫ÂàÜ</label>
        {{ form.user_type(class="w-full p-2 rounded border", id="user_type") }}
      </div>

      <!-- Ê≥ï‰∫∫Áî®„Éï„Ç£„Éº„É´„Éâ -->
      <div id="corporate_fields" class="mb-6 hidden">
        <div class="mb-4">
          {{ form.company_name.label(class="block mb-1") }}
          {{ form.company_name(class="w-full p-2 rounded border") }}
        </div>
        <div class="mb-4">
          {{ form.company_kana.label(class="block mb-1") }}
          {{ form.company_kana(class="w-full p-2 rounded border") }}
        </div>
      </div>

      <!-- Ê∞èÂêç -->
      <div class="flex gap-4 mb-4">
        <div class="w-1/2">
          {{ form.last_name.label(class="block mb-1") }}
          {{ form.last_name(class="w-full p-2 rounded border") }}
        </div>
        <div class="w-1/2">
          {{ form.first_name.label(class="block mb-1") }}
          {{ form.first_name(class="w-full p-2 rounded border") }}
        </div>
      </div>

      <!-- „Éï„É™„Ç¨„Éä -->
      <div class="flex gap-4 mb-4">
        <div class="w-1/2">
          {{ form.last_kana.label(class="block mb-1") }}
          {{ form.last_kana(class="w-full p-2 rounded border") }}
        </div>
        <div class="w-1/2">
          {{ form.first_kana.label(class="block mb-1") }}
          {{ form.first_kana(class="w-full p-2 rounded border") }}
        </div>
      </div>

      <!-- ÈÉµ‰æøÁï™Âè∑ -->
      <div class="mb-4">
        {{ form.postal_code.label(class="block mb-1") }}
        {{ form.postal_code(class="w-full p-2 rounded border") }}
      </div>

      <!-- ÈÉΩÈÅìÂ∫úÁúå„ÉªÂ∏ÇÂå∫ÈÉ° -->
      <div class="flex gap-4 mb-4">
        <div class="w-1/2">
          {{ form.prefecture.label(class="block mb-1") }}
          {{ form.prefecture(class="w-full p-2 rounded border") }}
        </div>
        <div class="w-1/2">
          {{ form.city.label(class="block mb-1") }}
          {{ form.city(class="w-full p-2 rounded border") }}
        </div>
      </div>

      <!-- ‰ΩèÊâÄ -->
      <div class="mb-4">
        {{ form.address1.label(class="block mb-1") }}
        {{ form.address1(class="w-full p-2 rounded border") }}
      </div>
      <div class="mb-4">
        {{ form.address2.label(class="block mb-1") }}
        {{ form.address2(class="w-full p-2 rounded border") }}
      </div>

      <!-- ÈõªË©±Áï™Âè∑ -->
      <div class="mb-4">
        {{ form.phone.label(class="block mb-1") }}
        {{ form.phone(class="w-full p-2 rounded border") }}
      </div>

      <!-- Â∞ÇÁî®ÁôªÈå≤„Éë„Çπ„ÉØ„Éº„Éâ -->
      <div class="mb-6">
        {{ form.register_key.label(class="block mb-1") }}
        {{ form.register_key(class="w-full p-2 rounded border") }}
        <p class="text-sm text-gray-500 mt-1">‚Äª ÁôªÈå≤„Å´„ÅØ„Äåtcctool„Äç„Å®„ÅÑ„ÅÜÁôªÈå≤Â∞ÇÁî®„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÂøÖË¶Å„Åß„Åô</p>
      </div>

      <!-- ÁôªÈå≤„Éú„Çø„É≥ -->
      {{ form.submit(class="w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded") }}

      <!-- „É≠„Ç∞„Ç§„É≥„É™„É≥„ÇØ -->
      <p class="text-center text-sm mt-4">
        Êó¢„Å´„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„Åß„Åô„ÅãÔºü
        <a href="{{ url_for('main.login') }}" class="text-blue-600 hover:underline">„É≠„Ç∞„Ç§„É≥</a>
      </p>
    </div>
  </form>
</div>

<!-- JS -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const userTypeSelect = document.getElementById("user_type");
    const corporateFields = document.getElementById("corporate_fields");

    function toggleCorporateFields() {
      if (userTypeSelect.value === "corporate") {
        corporateFields.classList.remove("hidden");
      } else {
        corporateFields.classList.add("hidden");
      }
    }

    userTypeSelect.addEventListener("change", toggleCorporateFields);
    toggleCorporateFields();

    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
{% endblock %}
