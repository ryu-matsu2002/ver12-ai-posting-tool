{% extends "register_base.html" %}
{% block title %}Register | AI Posting Tool{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-100 px-4 py-10">
  <h2 class="text-2xl font-semibold mb-8 text-center">æ–°è¦ç™»éŒ²</h2>

  <form method="post" class="w-full max-w-3xl mx-auto space-y-6">
    {{ form.hidden_tag() }}

    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼å -->
    <div>
      <label class="block mb-1 font-medium text-sm">ãƒ¦ãƒ¼ã‚¶ãƒ¼å <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      {{ form.username(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
    </div>

    <!-- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ -->
    <div>
      <label class="block mb-1 font-medium text-sm">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      {{ form.email(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
    </div>

    <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ -->
    <div>
      <label class="block mb-1 font-medium text-sm">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      <div class="relative">
        {{ form.password(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2 pr-10", id="password") }}
        <span class="absolute right-2 top-2 cursor-pointer text-gray-500" onclick="togglePassword('password')">ğŸ‘</span>
      </div>
    </div>

    <!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª -->
    <div>
      <label class="block mb-1 font-medium text-sm">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      <div class="relative">
        {{ form.confirm(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2 pr-10", id="confirm") }}
        <span class="absolute right-2 top-2 cursor-pointer text-gray-500" onclick="togglePassword('confirm')">ğŸ‘</span>
      </div>
    </div>

    <!-- åŒºåˆ† -->
    <div>
      <label class="block mb-1 font-medium text-sm">ç™»éŒ²åŒºåˆ† <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      {{ form.user_type(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2", id="user_type") }}
    </div>

    <!-- æ³•äººå°‚ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ -->
    <div id="corporate_fields" class="space-y-4 hidden">
      <div>
        <label class="block mb-1 font-medium text-sm">ä¼šç¤¾å <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
        {{ form.company_name(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      </div>
      <div>
        <label class="block mb-1 font-medium text-sm">ä¼šç¤¾åãƒ•ãƒªã‚¬ãƒŠ <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
        {{ form.company_kana(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      </div>
    </div>

    <!-- æ°å -->
    <div class="flex gap-6">
      <div class="w-1/2">
        <label class="block mb-1 font-medium text-sm">å§“ <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
        {{ form.last_name(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      </div>
      <div class="w-1/2">
        <label class="block mb-1 font-medium text-sm">å <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
        {{ form.first_name(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      </div>
    </div>

    <!-- ãƒ•ãƒªã‚¬ãƒŠ -->
    <div class="flex gap-6">
      <div class="w-1/2">
        <label class="block mb-1 font-medium text-sm">ã‚»ã‚¤ <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
        {{ form.last_kana(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      </div>
      <div class="w-1/2">
        <label class="block mb-1 font-medium text-sm">ãƒ¡ã‚¤ <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
        {{ form.first_kana(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      </div>
    </div>

    <!-- éƒµä¾¿ç•ªå· -->
    <div>
      <label class="block mb-1 font-medium text-sm">éƒµä¾¿ç•ªå· <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      {{ form.postal_code(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      <p class="text-xs text-gray-500">â€» ãƒã‚¤ãƒ•ãƒ³ã‚ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„</p>
    </div>

    <!-- ä½æ‰€ï¼ˆçµ±åˆï¼‰ -->
    <div>
      <label class="block mb-1 font-medium text-sm">ä½æ‰€ <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      {{ form.address(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
    </div>

    <!-- é›»è©±ç•ªå· -->
    <div>
      <label class="block mb-1 font-medium text-sm">æºå¸¯é›»è©±ç•ªå· <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      {{ form.phone(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      <p class="text-xs text-gray-500">â€» ãƒã‚¤ãƒ•ãƒ³ã‚ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„</p>
    </div>

    <!-- ç™»éŒ²ã‚­ãƒ¼ -->
    <div>
      <label class="block mb-1 font-medium text-sm">æ–°è¦ç™»éŒ²ç”¨ã‚³ãƒ¼ãƒ‰ <span class="text-red-600 text-xs font-bold">å¿…é ˆ</span></label>
      {{ form.register_key(class="w-full border-b border-gray-400 bg-transparent focus:outline-none py-2") }}
      <p class="text-xs text-gray-500">â€» TCCã‚ˆã‚Šç™ºè¡Œæ¸ˆã¿ã§ã™ã€‚</p>
    </div>

    <!-- ç™»éŒ²ãƒœã‚¿ãƒ³ -->
    <div class="pt-4">
      {{ form.submit(class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded text-lg font-semibold") }}
    </div>

    <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒªãƒ³ã‚¯ -->
    <p class="text-center text-sm mt-6">
      æ—¢ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿ
      <a href="{{ url_for('main.login') }}" class="text-blue-600 hover:underline">ãƒ­ã‚°ã‚¤ãƒ³</a>
    </p>
  </form>
</div>

<!-- JSï¼šæ³•äººãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åˆ¶å¾¡ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºåˆ‡æ›¿ -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const userTypeSelect = document.getElementById("user_type");
    const corporateFields = document.getElementById("corporate_fields");

    function toggleCorporateFields() {
      corporateFields.classList.toggle("hidden", userTypeSelect.value !== "corporate");
    }

    userTypeSelect.addEventListener("change", toggleCorporateFields);
    toggleCorporateFields();
  });

  function togglePassword(id) {
    const input = document.getElementById(id);
    input.type = input.type === "password" ? "text" : "password";
  }
</script>
{% endblock %}
