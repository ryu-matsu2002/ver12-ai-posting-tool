{% extends "base.html" %}
{% block title %}åˆå›ãƒ—ãƒ©ãƒ³è³¼å…¥ | TCC autowize{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-6 py-10 bg-white rounded shadow-md mt-8">

  <h1 class="text-3xl font-bold mb-6 text-blue-800 flex items-center gap-2">
    <img src="/static/icons/shop-cart.gif" alt="cart" class="w-6 h-6"> åˆå›ãƒ—ãƒ©ãƒ³è³¼å…¥
  </h1>

  <p class="mb-4 text-gray-700 leading-relaxed">
    ã“ã®ãƒ„ãƒ¼ãƒ«ã§WordPressã‚µã‚¤ãƒˆã‚’ç™»éŒ²ãƒ»ç®¡ç†ã™ã‚‹ã«ã¯ã€ã¾ãšãƒ—ãƒ©ãƒ³ã‚’è³¼å…¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<br>
    ä»¥ä¸‹ã‚ˆã‚Šã”å¸Œæœ›ã®ãƒ—ãƒ©ãƒ³ã¨ç™»éŒ²ã‚µã‚¤ãƒˆæ•°ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚
  </p>

  <div class="p-4 bg-yellow-100 text-yellow-800 rounded mb-6">
    ğŸš¨ <strong>æ³¨æ„ï¼š</strong>æœ€åˆã®ã‚µã‚¤ãƒˆç™»éŒ²ã‚’è¡Œã†ã«ã¯ã€å¿…ãšã“ã®ãƒšãƒ¼ã‚¸ã§ã®æ±ºæ¸ˆãŒå¿…è¦ã§ã™ã€‚
  </div>

  <form action="{{ url_for('main.purchase') }}" method="post" id="payment-form" class="space-y-5">

    <!-- ãƒ—ãƒ©ãƒ³é¸æŠ -->
    <div>
      <label class="block font-semibold text-gray-800 mb-1">ãƒ—ãƒ©ãƒ³ç¨®åˆ¥</label>
      <select name="plan_type" id="plan_type" class="w-full border rounded p-3 shadow-sm bg-white">
        <option value="affiliate">ğŸŸ¦ ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆç”¨ï¼ˆÂ¥3,000ï¼‰</option>
        <option value="business">ğŸŸ¨ äº‹æ¥­ç”¨ï¼ˆæœˆé¡ Â¥20,000ï¼‰</option>
      </select>
    </div>

    <!-- ã‚µã‚¤ãƒˆæ•°å…¥åŠ› -->
    <div>
      <label class="block font-semibold text-gray-800 mb-1">ã‚µã‚¤ãƒˆæ•°</label>
      <input type="number" name="site_count" id="site_count"
        class="w-full border rounded p-3 shadow-sm" min="1" placeholder="ä¾‹: 3" required>
    </div>

    <!-- åˆè¨ˆé‡‘é¡è¡¨ç¤º -->
    <div class="text-right font-bold text-green-700 text-lg">
      åˆè¨ˆé‡‘é¡: <span id="total_price">Â¥3,000</span>
    </div>

    <!-- æ±ºæ¸ˆãƒœã‚¿ãƒ³ -->
    <button type="submit"
      class="w-full py-3 bg-gradient-to-r from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 text-white rounded-lg text-lg font-bold shadow-md transform hover:scale-105 transition">
      ğŸ’³ ãƒ—ãƒ©ãƒ³ã‚’è³¼å…¥ã—ã¦é–‹å§‹ã™ã‚‹
    </button>
  </form>

  <!-- é‡‘é¡è¡¨ç¤ºç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script>
    const priceMap = {
      affiliate: 3000,
      business: 20000
    };

    function updateTotal() {
      const plan = document.getElementById("plan_type").value;
      const count = parseInt(document.getElementById("site_count").value || 1);
      const price = priceMap[plan] * count;
      document.getElementById("total_price").textContent = `Â¥${price.toLocaleString()}`;
    }

    document.getElementById("plan_type").addEventListener("change", updateTotal);
    document.getElementById("site_count").addEventListener("input", updateTotal);
  </script>
</div>
{% endblock %}
