<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="noindex, nofollow">
  <title>{% block title %}管理画面{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com/3.4.4"></script>
  <!-- Bootstrap 5 CSS（内部SEO UIで使用。Tailwindと共存OK） -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- ✅ ファビコンの追加 -->
  <link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="image/png">
  <!-- ✅ 内部SEOで付けたリンクだけ下線（通常リンクは変更しない） -->
  <style>
    .ai-content a.ai-ilink { text-decoration: underline; }
  </style>
</head>
<body class="bg-gray-100 h-screen text-gray-800 flex">

  <!-- ✅ 左サイドメニュー（拡大スタイル） -->
  <aside class="w-64 bg-gray-900 text-white flex flex-col p-4 space-y-4 text-lg">

    <!-- 🔧 ロゴ＋SITE CRAFT（拡大） -->
    <a href="{{ url_for('admin.admin_users') }}" class="flex items-center mb-6">
      <img src="{{ url_for('static', filename='images/tcc_logo.png') }}" alt="Logo" class="w-12 h-12 mr-3">
      <div class="text-white text-2xl font-bold leading-tight">
        <div>SITE</div>
        <div>CRAFT</div>
      </div>
    </a>

    <!-- ✅ メニュー一覧（拡大済み） -->
    <a href="{{ url_for('admin.admin_users') }}" class="hover:text-yellow-400">👤 ユーザー管理</a>
    <a href="{{ url_for('admin.admin_sites') }}" class="hover:text-yellow-400">🌐 登録サイト/記事管理</a>
    <a href="{{ url_for('admin.manage_genres') }}" class="hover:text-yellow-400">🗂️ ジャンル管理</a>
    <a href="{{ url_for('admin.admin_prompt_list') }}" class="hover:text-yellow-400">🧠 プロンプト管理</a>
    <a href="{{ url_for('admin.admin_keyword_list') }}" class="hover:text-yellow-400">🔑 キーワード管理</a>
    <a href="{{ url_for('admin.admin_captcha_dataset') }}" class="hover:text-yellow-400">📚 CAPTCHA学習データ</a>
    <a href="{{ url_for('admin.admin_gsc_sites') }}" class="hover:text-yellow-400">📈 GSCサイト状況一覧</a>
    <a href="{{ url_for('admin.admin_blog_accounts') }}" class="hover:text-yellow-400">📒 外部SEO管理</a> 
    <a href="{{ url_for('admin.admin_internal_seo_index') }}" class="hover:text-yellow-400">🧩 内部SEO管理</a>
    <a href="{{ url_for('admin.api_usage') }}" class="hover:text-yellow-400">💬 ChatGPT使用量</a>
    <a href="{{ url_for('admin.job_status') }}" class="hover:text-yellow-400">🔄 処理中ジョブ</a>
    <a href="{{ url_for('admin.admin_ranking_page') }}" class="hover:text-yellow-400">📊 ランキング分析</a>
    <a href="{{ url_for('admin.accounting') }}" class="hover:text-yellow-400">🧾 経理ダッシュボード</a>
    <a href="{{ url_for('admin.admin_monitoring') }}" class="hover:text-yellow-400">🖥️ サーバー監視</a>
    <a href="{{ url_for('admin.admin_gsc_status') }}" class="hover:text-yellow-400">🔍 Search Console連携</a>

    <!-- 区切り -->
    <hr class="border-gray-700 my-2">

    <a href="{{ url_for('main.logout') }}" class="hover:text-red-400">🚪 ログアウト</a>
  </aside>

  <!-- ✅ メインコンテンツ -->
  <main class="flex-1 p-8 overflow-y-auto">
    {# 管理者がなりすまし中のときだけ表示 #}
    {% if session.get('admin_id') %}
      <div class="mb-4 p-3 rounded bg-yellow-100 text-yellow-900 border border-yellow-300 flex items-center justify-between">
        <div>
          🛡️ <strong>管理者モード</strong>：
          現在 <span class="font-semibold">{{ current_user.username }}</span> さんとして操作しています。
        </div>
        <div class="space-x-2">
          <a href="{{ url_for('admin.admin_users') }}"
             class="px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-sm">別ユーザーに切替</a>
          <a href="{{ url_for('admin.admin_return') }}"
             class="px-3 py-1 rounded bg-gray-700 text-white hover:bg-gray-800 text-sm">管理者に戻る</a>
        </div>
      </div>
    {% endif %}
    {% block content %}{% endblock %}
  </main>

  <!-- 子テンプレの <script> をここで差し込む -->
  {% block scripts %}{% endblock %}
  <!-- Bootstrap 5 JS（モーダル/アコーディオンなどが動作） -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
