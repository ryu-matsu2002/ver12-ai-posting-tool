{% extends "base_admin.html" %}
{% block title %}ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç®¡ç† | ç®¡ç†è€…{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-6">ğŸ”‘ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä¸€è¦§</h1>

<div class="space-y-6">
  {% for user in users %}
    <details class="bg-blue-100 border border-blue-300 rounded p-4">
      <summary class="cursor-pointer font-semibold text-lg flex items-center">
        <span class="material-icons mr-2">person</span>
        {{ user.last_name }} {{ user.first_name }}
        ï¼ˆé€šå¸¸: {{ user.keywords | length }}ä»¶ / GSC: {{ user.gsc_keywords | length }}ä»¶ï¼‰
      </summary>

      <!-- ğŸ”¹ é€šå¸¸ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ -->
      <h2 class="mt-4 font-semibold text-base text-blue-800">ğŸ“ é€šå¸¸ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆ{{ user.keywords | length }}ä»¶ï¼‰</h2>
      {% if user.keywords %}
        <table class="mt-2 w-full bg-white text-sm border rounded shadow">
          <thead class="bg-gray-200">
            <tr>
              <th class="py-2 px-4">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</th>
              <th class="py-2 px-4">ã‚¸ãƒ£ãƒ³ãƒ«</th>
              <th class="py-2 px-4">ç™»éŒ²æ—¥</th>
            </tr>
          </thead>
          <tbody>
            {% for keyword in user.keywords %}
            <tr class="border-t">
              <td class="py-2 px-4">{{ keyword.word }}</td>
              <td class="py-2 px-4">{{ keyword.genre.name if keyword.genre else "æœªè¨­å®š" }}</td>
              <td class="py-2 px-4 text-gray-500">
                {{ keyword.created_at.strftime('%Y-%m-%d %H:%M') if keyword.created_at else "-" }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="text-gray-600 mt-2">é€šå¸¸ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
      {% endif %}

      <!-- ğŸ”¹ GSCã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ -->
      <h2 class="mt-6 font-semibold text-base text-green-800">ğŸ” GSCã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆ{{ user.gsc_keywords | length }}ä»¶ï¼‰</h2>
      {% if user.gsc_keywords %}
        <table class="mt-2 w-full bg-white text-sm border rounded shadow">
          <thead class="bg-gray-200">
            <tr>
              <th class="py-2 px-4">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</th>
              <th class="py-2 px-4">ã‚¸ãƒ£ãƒ³ãƒ«</th>
              <th class="py-2 px-4">ç™»éŒ²æ—¥</th>
            </tr>
          </thead>
          <tbody>
            {% for keyword in user.gsc_keywords %}
            <tr class="border-t">
              <td class="py-2 px-4">{{ keyword.word }}</td>
              <td class="py-2 px-4">{{ keyword.genre.name if keyword.genre else "æœªè¨­å®š" }}</td>
              <td class="py-2 px-4 text-gray-500">
                {{ keyword.created_at.strftime('%Y-%m-%d %H:%M') if keyword.created_at else "-" }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="text-gray-600 mt-2">GSCã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
      {% endif %}
    </details>
  {% endfor %}
</div>
{% endblock %}
