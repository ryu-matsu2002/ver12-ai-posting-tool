{% extends "base_admin.html" %}
{% block title %}ã‚¸ãƒ£ãƒ³ãƒ«ç®¡ç†{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-6">ğŸ“š ã‚¸ãƒ£ãƒ³ãƒ«ç®¡ç†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ï¼‰</h2>

<div class="space-y-4">
  {% for user in users %}
    <details class="bg-blue-100 border border-blue-300 rounded p-4">
      <summary class="cursor-pointer font-semibold text-lg flex items-center">
        <span class="material-icons mr-2">person</span>
        {{ user.last_name }} {{ user.first_name }}ï¼ˆ{{ user.genres|length }}ã‚¸ãƒ£ãƒ³ãƒ«ï¼‰
      </summary>

      {% if user.genres %}
        <table class="mt-4 w-full bg-white text-sm border rounded shadow">
          <thead class="bg-gray-200">
            <tr>
              <th class="px-3 py-2">ID</th>
              <th class="px-3 py-2">ã‚¸ãƒ£ãƒ³ãƒ«å</th>
              <th class="px-3 py-2">èª¬æ˜</th>
              <th class="px-3 py-2">æ“ä½œ</th>
            </tr>
          </thead>
          <tbody>
            {% for genre in user.genres %}
            <tr class="border-t">
              <td class="px-3 py-2">{{ genre.id }}</td>
              <td class="px-3 py-2 font-semibold">{{ genre.name }}</td>
              <td class="px-3 py-2 text-gray-700">{{ genre.description or "ï¼ˆãªã—ï¼‰" }}</td>
              <td class="px-3 py-2">
                <form method="post" action="{{ url_for('admin.delete_genre', genre_id=genre.id) }}" onsubmit="return confirm('å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                  <button type="submit" class="text-red-600 hover:underline text-sm">å‰Šé™¤</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="mt-2 text-gray-600">ã‚¸ãƒ£ãƒ³ãƒ«ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
      {% endif %}
    </details>
  {% endfor %}
</div>
{% endblock %}
