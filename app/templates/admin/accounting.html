{% extends "base_admin.html" %}
{% block title %}経理ダッシュボード{% endblock %}

{% block content %}
<div class="p-6 space-y-8">

  <h1 class="text-2xl font-bold">💼 経理ダッシュボード <span class="text-sm text-gray-500">(TCC未購入ユーザー集計)</span></h1>

  <!-- 💰 総集計 -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <div class="bg-white p-4 rounded shadow text-center">
      <div class="text-sm text-gray-600">対象サイト数</div>
      <div class="text-2xl font-bold text-blue-600">{{ total_count }} 件</div>
    </div>
    <div class="bg-white p-4 rounded shadow text-center">
      <div class="text-sm text-gray-600">松本龍之介（@1000）</div>
      <div class="text-2xl font-bold text-green-600">{{ total_ryunosuke | comma }} 円</div>
    </div>
    <div class="bg-white p-4 rounded shadow text-center">
      <div class="text-sm text-gray-600">松本毅（@2000）</div>
      <div class="text-2xl font-bold text-purple-600">{{ total_takeshi | comma }} 円</div>
    </div>
  </div>

  <!-- 📅 月別内訳 -->
  <div class="bg-white p-6 rounded shadow">
    <h2 class="text-lg font-bold mb-4">📅 月別内訳</h2>
    <table class="min-w-full text-sm text-center border border-gray-200">
      <thead class="bg-gray-100 text-gray-700">
        <tr>
          <th class="py-2 px-4 border">年月</th>
          <th class="py-2 px-4 border">サイト数</th>
          <th class="py-2 px-4 border">龍之介（@1000）</th>
          <th class="py-2 px-4 border">毅（@2000）</th>
        </tr>
      </thead>
      <tbody>
        {% for month, data in site_data_by_month.items() %}
        <tr class="hover:bg-gray-50">
          <td class="py-2 px-4 border">{{ month }}</td>
          <td class="py-2 px-4 border">{{ data.site_count }}</td>
          <td class="py-2 px-4 border">{{ data.ryunosuke_income | comma }}</td>
          <td class="py-2 px-4 border">{{ data.takeshi_income | comma }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
