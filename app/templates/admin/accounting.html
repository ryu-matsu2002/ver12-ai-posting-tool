{% extends "base_admin.html" %}
{% block title %}çµŒç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰{% endblock %}

{% block content %}
<div class="p-6">
  <h1 class="text-2xl font-bold mb-6">ğŸ’¼ çµŒç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆTCCæœªè³¼å…¥ãƒ¦ãƒ¼ã‚¶ãƒ¼é›†è¨ˆï¼‰</h1>

  <!-- ğŸ“… è¡¨ç¤ºåˆ‡æ›¿ -->
  <form method="get" class="mb-6">
    <label for="month" class="mr-2 font-semibold">ğŸ“… è¡¨ç¤ºæœˆï¼š</label>
    <select name="month" id="month" class="p-2 border rounded" onchange="this.form.submit()">
      <option value="all" {% if selected_month == 'all' %}selected{% endif %}>å…¨æœŸé–“</option>
      {% for month in all_months %}
        <option value="{{ month }}" {% if selected_month == month %}selected{% endif %}>{{ month }}</option>
      {% endfor %}
    </select>
  </form>

  <!-- ğŸ’° é›†è¨ˆè¡¨ç¤º -->
  <div class="bg-white shadow rounded p-6 mb-6">
    <h2 class="text-lg font-bold mb-4">ğŸ“Š é›†è¨ˆçµæœ</h2>
    <ul class="list-disc list-inside space-y-1">
      <li>å¯¾è±¡ã‚µã‚¤ãƒˆæ•°ï¼ˆTCCæœªè³¼å…¥ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ï¼š<strong>{{ total_sites }}</strong> ä»¶</li>
      <li>æ¾æœ¬é¾ä¹‹ä»‹ã¸ã®å ±é…¬ï¼š<strong>{{ total_ryunosuke | int | comma }} å††</strong>ï¼ˆ@1000å††ï¼‰</li>
      <li>æ¾æœ¬æ¯…ã¸ã®å ±é…¬ï¼š<strong>{{ total_takeshi | int | comma }} å††</strong>ï¼ˆ@2000å††ï¼‰</li>
    </ul>
  </div>

  <!-- ğŸ“‹ æœˆåˆ¥ãƒªã‚¹ãƒˆ -->
  <div class="bg-gray-50 p-4 rounded shadow">
    <h3 class="text-md font-bold mb-2">ğŸ“… æœˆåˆ¥å†…è¨³</h3>
    <table class="min-w-full border border-gray-300 text-sm text-center bg-white">
      <thead class="bg-gray-100">
        <tr>
          <th class="py-2 px-4 border">å¹´æœˆ</th>
          <th class="py-2 px-4 border">ã‚µã‚¤ãƒˆæ•°</th>
          <th class="py-2 px-4 border">é¾ä¹‹ä»‹ï¼ˆ@1000ï¼‰</th>
          <th class="py-2 px-4 border">æ¯…ï¼ˆ@2000ï¼‰</th>
        </tr>
      </thead>
      <tbody>
        {% for row in monthly_data %}
        <tr class="hover:bg-gray-50">
          <td class="py-2 px-4 border">{{ row.month }}</td>
          <td class="py-2 px-4 border">{{ row.count }}</td>
          <td class="py-2 px-4 border">{{ row.ryunosuke | int | comma }}</td>
          <td class="py-2 px-4 border">{{ row.takeshi | int | comma }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% macro comma(value) %}
{{ "{:,}".format(value) }}
{% endmacro %}
