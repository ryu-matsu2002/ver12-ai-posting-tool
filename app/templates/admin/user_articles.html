{% extends "base_admin.html" %}
{% block title %}ユーザーの記事一覧{% endblock %}

{% block content %}
<div class="p-6">
  <h1 class="text-xl font-bold mb-4">📝 {{ user.email }} の記事一覧</h1>

  <table class="w-full table-auto">
    <thead>
      <tr class="border-b">
        <th class="px-2 py-2">ID</th>
        <th class="px-2 py-2">タイトル</th>
        <th class="px-2 py-2">状態</th>
        <th class="px-2 py-2">作成日</th>
      </tr>
    </thead>
    <tbody>
      {% for a in articles %}
      <tr class="border-b hover:bg-gray-100">
        <td class="px-2 py-2">{{ a.id }}</td>
        <td class="px-2 py-2">{{ a.title[:30] }}...</td>
        <td class="px-2 py-2">
          {{ a.status }}

          {# ✅ 追加: 投稿済みの記事に対して WordPress リンク（View）を表示 #}
          {% if a.status == 'posted' and a.posted_url %}
            <a href="{{ a.posted_url }}" target="_blank"
               class="ml-2 text-blue-600 underline hover:text-blue-800"
               title="投稿されたWordPress記事を開く">View</a>
          {% endif %}
        </td>
        <td class="px-2 py-2">{{ a.created_at.strftime('%Y-%m-%d') }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
