{% extends "base_admin.html" %}
{% block title %}è³¼å…¥å±¥æ­´ä¸€è¦§{% endblock %}

{% block content %}
<div class="p-8">
  <h1 class="text-3xl font-extrabold mb-8 text-gray-800">ğŸ“„ ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ è³¼å…¥å±¥æ­´ä¸€è¦§</h1>

  <!-- ğŸ“… æœˆåˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
  <form method="get" class="mb-6">
    <label for="month" class="font-semibold text-gray-700 mr-2">ğŸ“… è¡¨ç¤ºæœˆï¼š</label>
    <select name="month" id="month" onchange="this.form.submit()" class="border border-gray-300 rounded px-3 py-2 text-sm">
      <option value="all" {% if selected_month == 'all' %}selected{% endif %}>å…¨æœŸé–“</option>
      {% for month in all_months %}
        <option value="{{ month }}" {% if selected_month == month %}selected{% endif %}>{{ month }}</option>
      {% endfor %}
    </select>
  </form>

  <!-- è³¼å…¥å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå…¨ãƒ­ã‚°æœ€æ–°é †è¡¨ç¤ºï¼‰ -->
  <div class="bg-white border rounded-lg shadow-md overflow-x-auto">
    <table class="min-w-full text-sm text-center">
      <thead class="bg-gray-100 text-gray-700">
        <tr>
          <th class="py-2 px-4 border-b">è³¼å…¥æ—¥</th>
          <th class="py-2 px-4 border-b">ãƒ¦ãƒ¼ã‚¶ãƒ¼å</th>
          <th class="py-2 px-4 border-b">ã‚µã‚¤ãƒˆæ•°</th>
          <th class="py-2 px-4 border-b">ãƒ—ãƒ©ãƒ³</th>
        </tr>
      </thead>
      <tbody class="text-gray-800">
        {% for log in logs %}
        <tr class="hover:bg-gray-50">
          <td class="py-2 px-4 border-b">{{ log.created_at.strftime('%Y-%m-%d') }}</td>
          <td class="py-2 px-4 border-b">
            {{ log.user.last_name }} {{ log.user.first_name }}
          </td>
          <td class="py-2 px-4 border-b">{{ log.site_count }}</td>
          <td class="py-2 px-4 border-b">
            {% if log.plan_type == 'affiliate' %}
              ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆ
            {% elif log.plan_type == 'business' %}
              äº‹æ¥­ç”¨
            {% else %}
              ä¸æ˜
            {% endif %}
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="4" class="py-4 text-gray-500 italic text-center">å±¥æ­´ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
