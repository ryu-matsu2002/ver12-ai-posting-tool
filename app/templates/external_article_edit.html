{# app/templates/external_article_edit.html #}
{% extends "base.html" %}
{% block title %}外部SEO | 記事編集{% endblock %}

{% block content %}
<style>
  :root{
    --seo-bg:#3A1F5C; --pane:#44286D; --pane-2:#4D2F7D; --edge:rgba(255,255,255,.14);
    --txt:#fff; --txt-dim:#E7E1FA;
    --blue:#2563EB; --blue-h:#3B82F6; --gray:#6B7280; --gray-h:#4B5563;
  }

  /* 背景・文字色を紫テーマに統一 */
  html, body, main, #main, #content, .content, .page-wrapper, .page-content{
    background:var(--seo-bg) !important; color:var(--txt) !important;
  }
  h1,h2,h3,h4,label,span,p{ color:var(--txt) !important; }

  .page-title{
    font-size:1.6rem; font-weight:800; letter-spacing:.02em; margin:0 0 14px;
    text-shadow:0 2px 10px rgba(0,0,0,.25);
  }

  .form-box{
    background:var(--pane); border:1px solid var(--edge);
    border-radius:14px; padding:16px;
  }
  .field{ margin-bottom:16px; }
  .label{ display:block; font-weight:700; margin-bottom:6px; color:var(--txt-dim) !important; }
  .input, .textarea{
    width:100%; background:var(--pane-2); color:var(--txt);
    border:1px solid var(--edge); border-radius:10px;
    padding:10px 12px; outline:none;
  }
  .input:focus, .textarea:focus{
    box-shadow:0 0 0 3px rgba(201,183,255,.25);
  }
  .textarea{ min-height:450px; resize:vertical; }

  .actions{ display:flex; gap:.6rem; }

  .btn{
    display:inline-block; padding:.55rem 1rem; border-radius:.6rem;
    font-weight:700; font-size:.95rem; color:#fff !important;
  }
  .btn-blue{ background:var(--blue); }
  .btn-blue:hover{ background:var(--blue-h); }
  .btn-gray{ background:var(--gray); }
  .btn-gray:hover{ background:var(--gray-h); }
  .btn-ghost{ background:transparent; border:1px solid var(--edge); color:var(--txt) !important; }
  .btn-ghost:hover{ background:rgba(255,255,255,.06); }
</style>

<h2 class="page-title">外部SEO記事編集</h2>

{# 一覧ページURLを安全に組み立て #}
{% set acct_id = (article.account_id if (article.account_id is defined and article.account_id) else article.site_id) %}
{% set list_url = url_for('main.external_account_articles', acct_id=acct_id) %}

<div class="mb-4">
  <a href="{{ list_url }}" class="btn-ghost">← 記事一覧に戻る</a>
</div>

<form method="post" class="form-box">
  <div class="field">
    <label class="label">タイトル</label>
    <input type="text" name="title" value="{{ article.title }}" class="input">
  </div>

  <div class="field">
    <label class="label">本文 (HTML形式)</label>
    <textarea name="body" rows="20" class="textarea">{{ article.body }}</textarea>
  </div>

  <div class="actions">
    <button type="submit" class="btn btn-blue">更新</button>
    <a href="{{ request.referrer or list_url }}" class="btn btn-gray">キャンセル</a>
  </div>
</form>
{% endblock %}
