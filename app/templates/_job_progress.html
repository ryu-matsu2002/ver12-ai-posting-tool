{# --------------------------------------------------------------------- #}
{#  _job_progress.html                                                   #}
{#  AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”¨ï¼ˆã‚¸ãƒ§ãƒ–ãƒ¢ãƒ‡ãƒ«ãªã—ï¼‰                                #}
{#  æœŸå¾…å¤‰æ•°: site_id, blog                                              #}
{# --------------------------------------------------------------------- #}

{% set blog_label  = blog|capitalize %}
{% set card_id     = "site-card-" ~ site_id %}

<div id="{{ card_id }}" class="border p-4 rounded shadow-sm bg-white">

  <div class="flex items-center justify-between mb-2">
    <div class="font-bold text-gray-800">{{ blog_label }} å¤–éƒ¨SEO</div>

    {# ğŸš€ SEOæœªé–‹å§‹æ™‚ï¼šé–‹å§‹ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º #}
    {% if blog == "livedoor" %}
      <button
        class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded"
        data-site-id="{{ site_id }}"
        data-blog="{{ blog }}"
        onclick="handleCaptchaClick(this)">
        é–‹å§‹
      </button>
    {% else %}
      <button
        class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded"
        hx-post="{{ url_for('main.start_external_seo') }}"
        hx-vals='{"site_id":"{{ site_id }}","blog":"{{ blog }}"}'
        hx-target="#{{ card_id }}"
        hx-swap="outerHTML">
        é–‹å§‹
      </button>
    {% endif %}
  </div>

  <div class="text-sm text-gray-600">
    AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒ{{ blog_label }}ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²ã‚’è©¦ã¿ã¾ã™ã€‚
    å‡¦ç†ã«ã¯30ç§’å‰å¾Œã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
  </div>

</div>

{# âœ… JSé–¢æ•°ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¸€ç•ªä¸‹ or è¦ªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§èª­ã¿è¾¼ã‚“ã§ã‚‚OK #}
<script>
  function handleCaptchaClick(button) {
    const siteId = button.getAttribute("data-site-id");
    const blog   = button.getAttribute("data-blog");
    openCaptchaModal(siteId, blog);
  }
</script>
